<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promises</title>
</head>
<body>
    <script>
        //1º exemplo de promises
        // function falarDepoisDe(segundos,frase){
        //     return new Promise((resolve, reject) =>{
        //         setTimeout(() =>{
        //             resolve(frase) //resolve só aceita um parametro
        //         },segundos * 1000)
        //     })
        // }

        // falarDepoisDe(3,'Que legal').then(frase => frase.concat('??')).then(outraFrase => console.log(outraFrase))


        //segundo exemplo de promises
        // let p = new Promise(function(cumprirPromessa){
        //     cumprirPromessa(3)
        // })

        // console.log(typeof p)

        // p.then(function(valor){
        //     console.log(valor)
        // })

        //3º exemplo fazendo retornar uma array
        // let a = new Promise(function(cumprir){
        //     cumprir(['ana', 'bia', 'carlos', 'daniel'])
        // })

        // a.then(function(v){
        //     console.log(v)
        // })
        //a.then(v => console.log(v)) //fazendo uma arrow function pra simplificar o codigo acima


        //callback dentro de callback
        // setTimeout(function(){
        //     console.log('executando callback......')
            
        //     setInterval(function(){
        //         console.log('executando callback......')
                
        //         setTimeout(function(){
                    
        //             console.log('executando callback......')
        //         },2000)
                
        //     },2000)
        // },2000)

        //3º exemplo de promises
        // function esperarPor(tempo = 2000){
        //     return new Promise(function(resolve){
        //         setTimeout(function(){
        //             console.log('executando promise')
        //             resolve('vishhhh')
        //         },tempo)
        //     })
        // }

        //esperarPor(3000).then(texto => console.log(texto))
        // esperarPor()
        // .then(() => esperarPor())
        // .then(esperarPor)

        // 4º exemplo de promises
        function gerarNumeroEntre(min, max){
            if(min > max){
                [max, min] = [min, max] //ivertendo os valores caso o minimo seja maior q o maximo
            }

            return new Promise(resolve =>{
                const fator = max - min + 1
                const aleatorio = parseInt(Math.random() * fator) + min
                resolve(aleatorio)
            })
        }

        gerarNumeroEntre(10,30)
        .then(num => num * 10)
        .then(numx10 => `o numero gerado foi ${numx10}`)
        .then(console.log)

        //rever a aula 193 e 194
    </script>
</body>
</html>